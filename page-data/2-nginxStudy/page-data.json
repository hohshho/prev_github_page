{"componentChunkName":"component---src-templates-post-tsx","path":"/2-nginxStudy/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"nginx\" style=\"position:relative;\"><a href=\"#nginx\" aria-label=\"nginx permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nginx</h1>\n<h2 id=\"cgicommon-gateway-interface-란\" style=\"position:relative;\"><a href=\"#cgicommon-gateway-interface-%EB%9E%80\" aria-label=\"cgicommon gateway interface 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CGI(Common Gateway Interface) 란?</h2>\n<blockquote>\n<p>웹서버와 외부 프로그램(C, PHP, Python 등) 사이에서 정보를 주고받는 방법과 규약</p>\n</blockquote>\n<p><strong>이 표준에 맞춰 만들어진 것이 CGI 스크립트이다.</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/abdcdb62b17eececa456b7423a7a9360/b3ad9/cgipic.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.4054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABtklEQVQoz41TS6uBURQ9P80/M5EMDGSCEZKJUgwYCAMTJRHK+/1+5U3e67Z2HX3undxdX+dor73X2utsKhAIwGKxwOfzQcf7/f6cr9fr6zPmdIzHYwyHQ9RqNSiPx4NsNotwOIzZbPYBGwt+hzE3n8/RarVwPB7R6/WgcrkckskkeG63W6zX6w+Y93a7jW63i06ng9FohOfzKTmqXSwWUkNMo9GQUzG5Wq3weDwEuN/v5WOhw+FAJBJBLBZDIpGA3W5HtVr9KLter3I/HA5YLpdyKpfLBZvNBrfbLbIJIpiM0WhUfnMkEnKKTCYjyjabjeRIzlGpvlKpQPn9fhQKBcTjcQGyKcHFYlEeisw0nIXEUO10OhXcbreT6Tgq84PBAKrZbCKdTkt3bTibcORQKCTKTSYTzGYzvF4vJpMJbrfbl9f0ly/MqZQ2lUw0muz3+12AbJrP52G1WhEMBkW5DvpFaxgkOJ1OuFwuUDTe6XSKEu6TbqYfi2Ocz2fxkUpIoteGDVhDQTxLpRIU969cLiOVSgnLf/dQ5zUZ1dNr1e/3ZSXq9fqfpdWF+h9jbGS8swfXiY1/AFodJZZ7lcu/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cgipic\"\n        title=\"cgipic\"\n        src=\"/static/abdcdb62b17eececa456b7423a7a9360/fcda8/cgipic.png\"\n        srcset=\"/static/abdcdb62b17eececa456b7423a7a9360/12f09/cgipic.png 148w,\n/static/abdcdb62b17eececa456b7423a7a9360/e4a3f/cgipic.png 295w,\n/static/abdcdb62b17eececa456b7423a7a9360/fcda8/cgipic.png 590w,\n/static/abdcdb62b17eececa456b7423a7a9360/efc66/cgipic.png 885w,\n/static/abdcdb62b17eececa456b7423a7a9360/b3ad9/cgipic.png 909w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"관련-용어\" style=\"position:relative;\"><a href=\"#%EA%B4%80%EB%A0%A8-%EC%9A%A9%EC%96%B4\" aria-label=\"관련 용어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>관련 용어</h3>\n<ul>\n<li>Web Server : 웹 클라이언트에게 콘텐츠를 제공하는 서버</li>\n<li>WAS : 서버 단에서 Application을 동작할 수 있도록 지원</li>\n</ul>\n<h3 id=\"장점\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90\" aria-label=\"장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>장점</h3>\n<ul>\n<li>언어, 플랫폼에 독립적</li>\n<li>매우 단순하고 다른 서버 사이드 프로그래밍 언어에 비해 쉽게 수행</li>\n<li>라이브러리가 풍부하다</li>\n<li>가볍다</li>\n</ul>\n<h3 id=\"단점\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%A0%90\" aria-label=\"단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>단점</h3>\n<ul>\n<li>\n<p>느리다(요청이 올 때 마다 DB connection을 새로 열어야 한다)</p>\n<!-- TODO : 확인해보자 -->\n</li>\n<li>HTTP 요청마다 <strong>새로운 프로세스를 만들어</strong> 서버 메모리를 사용한다 (Fork로 구현되어 있음)</li>\n<li>데이터가 메모리에 캐시될 수 없다.</li>\n</ul>\n<h2 id=\"fastcgi란\" style=\"position:relative;\"><a href=\"#fastcgi%EB%9E%80\" aria-label=\"fastcgi란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FastCGI란?</h2>\n<blockquote>\n<p>하나의 큰 프로세스로 동작한다. 이 프로세스가 계속해서 새로운 요청(Request) 처리(CGI 단점 해결)</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/07073fa1645db47fbd224fc6a09fe2d3/b3ad9/fastcgip.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.972972972972975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABl0lEQVQoz4VSx6oCQRCcD/PL/ACPnrwogqwHHx68KLsmBDOirgExIkYMiwETKqZ6dsOIyJPX0MxMT3VNdU8Ls9kMm82G6/UKssfjwX673XC/39nlnuISI89yL88in88jkUhgOBxy8D+TpN9MlMplzGYzVjgejzl4PB4RiUSgqirC4TCv2Wz2lXS5XNDr9VjEaDRCu91Go9HAZDKB0DQNxWKRgafTCZvNhi8VRWFAvV5HpVKB0+nE4XBg3H6/RzqdZlIiy+VyyGQySCaTEC6XCz8eDyevVitWS4o8zxiRFQoFxGIxuN1uxiwWC177/T47qZVGwgSVlkql+IJ6uF6vUavV4HA44Pf7WVkgEIDdbudWkG23WwwGA8znc27T+XzmOP2HWC6Xr1eMJ4DKIeLpdAqLxQKTyQSfz8etkEbEpJxIm80mOp0Out0uqtUqhNVqhdfrhWEYr6Tdbgdd1xlMCqh0SqDxkT/darUQjUb5jiqickmMiMfjCAaD3L+/xkLO2vsMyr184B0rQqEQys9f/Ez+5p+kn/e/WTrelWaa030AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fastcgip\"\n        title=\"fastcgip\"\n        src=\"/static/07073fa1645db47fbd224fc6a09fe2d3/fcda8/fastcgip.png\"\n        srcset=\"/static/07073fa1645db47fbd224fc6a09fe2d3/12f09/fastcgip.png 148w,\n/static/07073fa1645db47fbd224fc6a09fe2d3/e4a3f/fastcgip.png 295w,\n/static/07073fa1645db47fbd224fc6a09fe2d3/fcda8/fastcgip.png 590w,\n/static/07073fa1645db47fbd224fc6a09fe2d3/efc66/fastcgip.png 885w,\n/static/07073fa1645db47fbd224fc6a09fe2d3/b3ad9/fastcgip.png 909w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>대부분의 웹서버 <strong>(Nginx, IIS, Apache)</strong> 가 FastCGI를 제공한다.</p>\n<h2 id=\"php-fpmfast-process-manager\" style=\"position:relative;\"><a href=\"#php-fpmfast-process-manager\" aria-label=\"php fpmfast process manager permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PHP-FPM(Fast Process Manager)</h2>\n<blockquote>\n<p>PHP를 FastCGI 모드로 동작하게 해준다.</p>\n</blockquote>\n<h2 id=\"nginx-역할\" style=\"position:relative;\"><a href=\"#nginx-%EC%97%AD%ED%95%A0\" aria-label=\"nginx 역할 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nginx 역할</h2>\n<ol>\n<li>정적 파일을 처리하는 <strong>HTTP 서버</strong>로서의 역할</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8adb94e382071ee630fc427dfadd8e04/8c76f/webserver.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABxklEQVQoz42ST28SURTF+TBuXfrR3NiNexfGjbrQpkpiNKahlLSAQISkqdUaQKTFARmGmYHyhin/ih2G6czPB9iGUhae5CRz35t33n3n3NBY1ZgoCsvwg4DgH2dY/r6ul9eX90PxYpzi8SZG/5LeH/fWwZmw78/ozxmsinAbs7XQx47Ni9M6eb1P6lebw0YXRQwZux53EAR36unUxXUnXHmL/0MRrcezgk7R7JGuCmLlFu++a2x9VYmftCh3RvzIF2hpxrwjR140mXp4srBtm1QiSnI/gq7VF4InsfdsR95QtS84kt1lqx32pNDbbyqP9ko8/HDIvQf3ebz1EqXn8UUV5I1zMjWLZEEh92mXeGxbCqoLwUE2gxrfIS/G5GqCnZ8m4eMGzw9qPPlc4XXmlI1MmI1KFKOhU5EBNjQNpd6grjXJpfdJJ3YxDW0h6EeTTMIRDqSHicoZKUWQ/d2l1B4wcKY3dl1KrzpnHUzTZDQacSEZyKA86d3Mv5uUjwyLzbJOQT6j1LSo6W2azSbnlpACbRzH4X8xT/mV7fHUusIZjxn2ewwHfYQQWN0uwrJkgu7amVvHeYfzUVgdhzU3rw746rBf4y+qhuqYA+pigwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"webserver\"\n        title=\"webserver\"\n        src=\"/static/8adb94e382071ee630fc427dfadd8e04/fcda8/webserver.png\"\n        srcset=\"/static/8adb94e382071ee630fc427dfadd8e04/12f09/webserver.png 148w,\n/static/8adb94e382071ee630fc427dfadd8e04/e4a3f/webserver.png 295w,\n/static/8adb94e382071ee630fc427dfadd8e04/fcda8/webserver.png 590w,\n/static/8adb94e382071ee630fc427dfadd8e04/8c76f/webserver.png 612w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"2\">\n<li>응용 프로그램 서버에 요청을 보내는 <strong>리버스 프록시</strong> 역할</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 538px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a44021d65e8c8560a553b7286dbfc734/9516f/reverseProxy.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABRElEQVQoz5WS207CQBCGef+HMF74AmajiTEBgxcYlVOrKbQVRKi2Xei2DRt6/i2LtOXgaW9md+af3W9mp4Z/rizLCrvdV2O1vyZ9t3fmFoyJWpxrVVGapgdJZXJ2QOU4c8idJtR+HXy53FxYJdonrK40LX1BEIAxhuFwgNurMzzdXyIKw13COI6hKApc1xXnycyBPDAwnrKchOFV68GYvmCxcGBZFjjnQjfSh6D2R9nD7YVrESEE3U4bnPbhvXfBjB58s4/n9jV0+QbSYwNLvvrxw75KhsAn5By6piEOeV7CCkkc5rEUvYcm6uQEI1UWtKZpikqiKILLKExjjG2XCsIkSUCpJexO7/I4pRS2bcPzPEGx1vi+D11XocgtaFLj9085NmelduP38wcaF6eQ7gjCMDgcm/1ZOzY++zpVkTB7GxfaT8cyBHrVNixPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"reverseProxy\"\n        title=\"reverseProxy\"\n        src=\"/static/a44021d65e8c8560a553b7286dbfc734/9516f/reverseProxy.png\"\n        srcset=\"/static/a44021d65e8c8560a553b7286dbfc734/12f09/reverseProxy.png 148w,\n/static/a44021d65e8c8560a553b7286dbfc734/e4a3f/reverseProxy.png 295w,\n/static/a44021d65e8c8560a553b7286dbfc734/9516f/reverseProxy.png 538w\"\n        sizes=\"(max-width: 538px) 100vw, 538px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"리버스-프록시란\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%B2%84%EC%8A%A4-%ED%94%84%EB%A1%9D%EC%8B%9C%EB%9E%80\" aria-label=\"리버스 프록시란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리버스 프록시란?</h3>\n<blockquote>\n<p>클라이언트가 서버에 요청하면, 프록시 서버가 배후 서버(응용프로그램 서버)로부터 데이터를 가져옴</p>\n</blockquote>\n<h3 id=\"리버스-프록시를-쓰는-이유\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%B2%84%EC%8A%A4-%ED%94%84%EB%A1%9D%EC%8B%9C%EB%A5%BC-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"리버스 프록시를 쓰는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리버스 프록시를 쓰는 이유</h3>\n<blockquote>\n<p><strong>프록시 서버를 둠으로써 요청을 배분하는 역할</strong>\ncli가 직접 App 서버에 요청하면 프로세스 1개가 응답대기 상태가 되어서 요청에 대한 버퍼링이 생김</p>\n</blockquote>\n<h3 id=\"event-driven-방식\" style=\"position:relative;\"><a href=\"#event-driven-%EB%B0%A9%EC%8B%9D\" aria-label=\"event driven 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Event-driven 방식</h3>\n<p>Thread 기반은 하나의 커넥션당 하나의 쓰레드를 사용</p>\n<p>Event-driven 방식은 Event Handler를 통해 비동기 방식으로 처리해 먼저 처리되는 것부터 로직이 진행된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ddf80552509d0d55c94bd9d42a422342/27b7a/threadp.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.810810810810814%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABIUlEQVQoz2VRCW6EMAzk//8Ctm+otBKVCl2ucgRCzuk4sJW6tWTC2M547GRKKTRNg7Zt8Xg8oLVGiBHRGATrEP2RPATGGA+MR2vPmghEt4NBOO/h6Zl8hEQIh2HAOI5Q+w5Hcjt8I6o7wvqBwwRY72DrGq7vcTj+24A4vyNun5iWDUqtyHDZuq7oug47yaSJE4XppGJvYUQVsT2oNpHZv3nWJ4VCJqMIWVVVUMuSEoaqHS+aXZ94P/FxNfyPORWbJMIQAnqOMZNsGUZoJrd5hqEaTeUJTzMsVWjWvOKDzbdpSvWZqBOTbmI1d1QUBUr6xKKWu8wFlyVmNvniA+Z5nvBCsubCb7dbqv8lfJqolf3Y6yUFy8WFSp9Y9iX5+IIl/wPwmhxpCcFDUwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"threadp\"\n        title=\"threadp\"\n        src=\"/static/ddf80552509d0d55c94bd9d42a422342/fcda8/threadp.png\"\n        srcset=\"/static/ddf80552509d0d55c94bd9d42a422342/12f09/threadp.png 148w,\n/static/ddf80552509d0d55c94bd9d42a422342/e4a3f/threadp.png 295w,\n/static/ddf80552509d0d55c94bd9d42a422342/fcda8/threadp.png 590w,\n/static/ddf80552509d0d55c94bd9d42a422342/27b7a/threadp.png 804w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a5a87ed1c2ebb17d8edc3a52861b07dc/3cd52/eventp.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.78378378378378%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABLElEQVQoz01R2W6DMBDM/39WFNKmaaTmra+lKtBAuAwGX0xnXRKx0mDWXs/OrHe32w1lWaKqKuR5jmmagGVB8B5LcP9gHuH4L/uPPBjWBoQQYi6xm+cZdV1HQiFvug7+foeraiz6G8uQwlgPRyKbF/BNg9laOCK0n/C6RN10MOSJhPLp+x5ZlmEcR1gWemMwa41p7KCHFkopKNYokqm2xTAMmHhuph7WaN5xUWUkFKlS0LJQ7Cr+KxIrjsEYS3WENOCZW+1KPNZtyF5UqNlNVGpeKn4y/BKGexLW0R5nJyEqxIFALnsZwyZ/WvZr54aWXo5HHPZ7VJyrzPb1dMLb+Rxt50WBhOfvl0t085WmOCQJPq7X6OJpeSs5CNZ5SNGdDySNtqoeryrrNpf4AzIxHZpG4qI1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"eventp\"\n        title=\"eventp\"\n        src=\"/static/a5a87ed1c2ebb17d8edc3a52861b07dc/fcda8/eventp.png\"\n        srcset=\"/static/a5a87ed1c2ebb17d8edc3a52861b07dc/12f09/eventp.png 148w,\n/static/a5a87ed1c2ebb17d8edc3a52861b07dc/e4a3f/eventp.png 295w,\n/static/a5a87ed1c2ebb17d8edc3a52861b07dc/fcda8/eventp.png 590w,\n/static/a5a87ed1c2ebb17d8edc3a52861b07dc/3cd52/eventp.png 857w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"지원-및-sni-기능-지원\" style=\"position:relative;\"><a href=\"#%EC%A7%80%EC%9B%90-%EB%B0%8F-sni-%EA%B8%B0%EB%8A%A5-%EC%A7%80%EC%9B%90\" aria-label=\"지원 및 sni 기능 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>지원 및 SNI 기능 지원</h2>\n<h2 id=\"nginx-설정\" style=\"position:relative;\"><a href=\"#nginx-%EC%84%A4%EC%A0%95\" aria-label=\"nginx 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nginx 설정</h2>\n<p><strong>설정 수정 시 원본을 복사해 보관해 두는 습관 가지자!</strong></p>\n<h3 id=\"설정-파일\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC\" aria-label=\"설정 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설정 파일</h3>\n<p>설정파일은 크게 4가지로 나뉜다.</p>\n<ol>\n<li>nginx.conf : 메인 설정 파일</li>\n<li>fcgi.conf : FastCGI 환경 설정파일</li>\n<li>sites-enabled : 활성화된 사이트들의 설정 파일 위치</li>\n<li>sites-available : 비활성화된 사이트들의 설정 파일 위치</li>\n</ol>\n<p>두개의 파일을 보며 Nginx 설정에 대해 확인해보자</p>\n<blockquote>\n<p>/etc/nginx/nginx.conf<br>\n/etc/nginx/sites-available/default</p>\n</blockquote>\n<h4 id=\"etcnginxnginxconf\" style=\"position:relative;\"><a href=\"#etcnginxnginxconf\" aria-label=\"etcnginxnginxconf permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/etc/nginx/nginx.conf</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">user www-data;\nworker_processes auto;\npid /run/nginx.pid;\n\nevents {\n        worker_connections 768;\n        # multi_accept on; #기본값:off\n}\n\nhttp {\n        sendfile on;\n        tcp_nopush on;\n        tcp_nodelay on;\n        keepalive_timeout 10; #기본값:75\n        types_hash_max_size 2048;\n        server_tokens off;\n\n        server_names_hash_bucket_size 64; #기본값:32\n        server_names_hash_max_size 2048; #기본값:512\n        # server_name_in_redirect off;\n\n        include /etc/nginx/mime.types;\n        default_type application/octet-stream;\n\n        access_log off; log_not_found off;\n        error_log /var/log/nginx/error.log warn;\n\n        include /etc/nginx/conf.d/*.conf;\n        include /etc/nginx/sites-enabled/*;\n}</code></pre></div>\n<p>nginx.conf 파일은 접속자 수, 동작 프로세스 수 등 퍼포먼스에 대한 기본적인 설정 항목을 포함한다.</p>\n<p>크게 3가지 항목으로 나뉜다.</p>\n<h4 id=\"1-최상단-core-모듈\" style=\"position:relative;\"><a href=\"#1-%EC%B5%9C%EC%83%81%EB%8B%A8-core-%EB%AA%A8%EB%93%88\" aria-label=\"1 최상단 core 모듈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 최상단 (Core 모듈)</h4>\n<p>user : Nginx 프로세스(워커 프로세스)가 실행되는 권한</p>\n<ul>\n<li>nginx는 master process, worker process로 동작한다.</li>\n<li>실질적으로 <strong>worker process가 실직적인 웹서버 역할</strong> 수행</li>\n<li>\n<p>root로 설정되어 있을 경우, 워커 프로세스를 root 권한으로 동작<br>\n-> 악의적인 사용자가 제어하게 된다면 보안상 위험<br>\n-> 보통 <strong>www-data, www, nginx</strong>와 같이 계정이 하는 일에 대한 대표성 있는 이름 사용  </p>\n<ul>\n<li>(default 값 - ubuntu : www-data, 기타 nobody )<br>\n-> 이 계정들은 일반 유저의 권한으로 쉘에 접속 할 수 없어야 안전하다.  </li>\n<li>\n<p>ubuntu 에서 계정 생성방법  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">useradd</span> --shell /usr/sbin/nologin www-data</code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<p>worker_processes : Nginx 프로세스 실행 가능 수</p>\n<ul>\n<li>auto일 경우도 있지만, 명시적으로 서버의 코어 수 만큼 할당하는 것이 보통 (더 높게도 가능)</li>\n</ul>\n<p>pid : Nginx 마스터 프로세스 정보</p>\n<h4 id=\"2-events\" style=\"position:relative;\"><a href=\"#2-events\" aria-label=\"2 events permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. events</h4>\n<p>주로 네트워크의 동작 방법과 관련된 설정값을 가진다. </p>\n<p>worker_connections : 몇개의 접속을 동시에 처리할 것인가</p>\n<ul>\n<li>worker<em>processes * worker</em>connections = <strong>처리 할 수 있는 커넥션의 양</strong></li>\n<li>\n<p>Tip!!</p>\n<ul>\n<li>여러 자료와 퍼포먼스 테스트를 하며 값을 조정해야 한다.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"3-http\" style=\"position:relative;\"><a href=\"#3-http\" aria-label=\"3 http permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. http</h4>\n<blockquote>\n<p>server, location의 루트 블록이라 할 수 있고, 여기서 설정된 값들은 하위 블록들이 상속한다.<br>\nhttp 블록은 여러개를 사용할 수 있지만 관리상의 이유로 한번 사용하는 것이 좋다.</p>\n</blockquote>\n<ul>\n<li>keepalive_timeout : 클라이언트에서 커넥션을 유지하는 시간을 의미</li>\n<li>servers token : Nginx 버전 숨길 수 있는 기능 (주석을 제거해 보안 이슈를 방지하는 것이 좋다.)</li>\n<li>server<em>names</em>hash<em>max</em>size, server<em>names</em>hash<em>bucket</em>size : 호스트의 도메인 이름에 대한 공간(너무 낮으면 에러 발생 가능)</li>\n<li><strong>log관련 설정</strong>은 각 <strong>호스트 마다 배분</strong>하는 것이 관리하기 편하므로 http block에선 off로 처리한다.</li>\n</ul>\n<h4 id=\"etc\" style=\"position:relative;\"><a href=\"#etc\" aria-label=\"etc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>etc</h4>\n<ul>\n<li><strong>include 옵션</strong> : 별도의 파일에 설정을 기록해서 설정의 그룹핑, 재활용성을 높이는 방법</li>\n<li>\n<p>ex) 리버스 프록시를 각 도메인에 설정한다고 했을 때 헤더 처리 옵션등을 conf.d에 넣어두고 불러온다. (nginx.conf 설정 파일이 깔끔해짐)</p>\n<ul>\n<li>리버스 프록시란? : </li>\n</ul>\n</li>\n</ul>\n<h4 id=\"4-server--location\" style=\"position:relative;\"><a href=\"#4-server--location\" aria-label=\"4 server  location permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. server / location</h4>\n<p>/etc/nginx/sites-available/default에 server, location 블록이 작성되어 있다.</p>\n<p>server 블록 : 하나의 웹사이트를 선언하는데 사용 (가상 호스팅 개념)\nlocation 블록 : server 블록 안에 등장하며 특정 URL을 처리한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">server {\n    listen       80;\n    server_name  localhost;\n \n    root   /usr/share/nginx/html;\n    location / {\n        index  index.html index.htm index.php;\n    }\n \n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n\n    location ~ \\.php$ {\n        fastcgi_pass   unix:/var/run/php5-fpm.sock;\n        fastcgi_index  index.php;\n        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n}</code></pre></div>\n<p>location 블록을 상세히 살펴보면</p>\n<ol>\n<li>fastcgi_pass : </li>\n<li>fastcgi_param : </li>\n</ol>\n<p><strong>설정 파일을 변경하면 nginx에 반영해야 하는데, reload 명령을 이용한다</strong></p>\n<h2 id=\"추가\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80\" aria-label=\"추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>추가!!</h2>\n<ul>\n<li>보통 가상 호스트 설정 파일의 경우 sites-available 디렉토리 아래 위치  </li>\n<li>sites-enabled 디렉토리에 심볼릭 링크를 걸어주면서 nginx에서 사용하게 설정</li>\n<li>에러 같은 경우 중요한 오류 이외에는 로그로 남기지 않게 설정해서 로그로 인해 디스크 엑세스를 하지 않게 설정한다!</li>\n</ul>\n<p><strong>conf파일 구성은 상황마다 다르다.</strong></p>\n<h3 id=\"로그-파일-위치\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8-%ED%8C%8C%EC%9D%BC-%EC%9C%84%EC%B9%98\" aria-label=\"로그 파일 위치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그 파일 위치</h3>\n<blockquote>\n<p>/var/log/nginx</p>\n</blockquote>\n<h2 id=\"upstream-module\" style=\"position:relative;\"><a href=\"#upstream-module\" aria-label=\"upstream module permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Upstream Module</h2>\n<blockquote>\n<p>NGINX를 일종의 LoadBalancer로 이용할 수 있게 해주는 모듈</p>\n</blockquote>\n<p>nginx에 대해 정리해보았다. 추가적으로 Reverse Proxy, Load Balencer에 대해 더 알아보고 가상 호스팅, 권한, /etc/nginx 파일 구조, 포스트 빠진내용에 대해 공부하고 관련 내용을 추가 할 예정이다.</p>","excerpt":"Nginx CGI(Common Gateway Interface) 란? 웹서버와 외부 프로그램(C, PHP, Python 등) 사이에서 정보를 주고받는 방법과 규약 이 표준에 맞춰 만들어진 것이 CGI 스크립트이다.  관련 용어 Web Server :…","tableOfContents":"<ul>\n<li>\n<p><a href=\"/2-nginxStudy/#nginx\">Nginx</a></p>\n<ul>\n<li>\n<p><a href=\"/2-nginxStudy/#cgicommon-gateway-interface-%EB%9E%80\">CGI(Common Gateway Interface) 란?</a></p>\n<ul>\n<li><a href=\"/2-nginxStudy/#%EA%B4%80%EB%A0%A8-%EC%9A%A9%EC%96%B4\">관련 용어</a></li>\n<li><a href=\"/2-nginxStudy/#%EC%9E%A5%EC%A0%90\">장점</a></li>\n<li><a href=\"/2-nginxStudy/#%EB%8B%A8%EC%A0%90\">단점</a></li>\n</ul>\n</li>\n<li><a href=\"/2-nginxStudy/#fastcgi%EB%9E%80\">FastCGI란?</a></li>\n<li><a href=\"/2-nginxStudy/#php-fpmfast-process-manager\">PHP-FPM(Fast Process Manager)</a></li>\n<li>\n<p><a href=\"/2-nginxStudy/#nginx-%EC%97%AD%ED%95%A0\">Nginx 역할</a></p>\n<ul>\n<li><a href=\"/2-nginxStudy/#%EB%A6%AC%EB%B2%84%EC%8A%A4-%ED%94%84%EB%A1%9D%EC%8B%9C%EB%9E%80\">리버스 프록시란?</a></li>\n<li><a href=\"/2-nginxStudy/#%EB%A6%AC%EB%B2%84%EC%8A%A4-%ED%94%84%EB%A1%9D%EC%8B%9C%EB%A5%BC-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0\">리버스 프록시를 쓰는 이유</a></li>\n<li><a href=\"/2-nginxStudy/#event-driven-%EB%B0%A9%EC%8B%9D\">Event-driven 방식</a></li>\n</ul>\n</li>\n<li><a href=\"/2-nginxStudy/#%EC%A7%80%EC%9B%90-%EB%B0%8F-sni-%EA%B8%B0%EB%8A%A5-%EC%A7%80%EC%9B%90\">지원 및 SNI 기능 지원</a></li>\n<li>\n<p><a href=\"/2-nginxStudy/#nginx-%EC%84%A4%EC%A0%95\">Nginx 설정</a></p>\n<ul>\n<li><a href=\"/2-nginxStudy/#%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC\">설정 파일</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2-nginxStudy/#%EC%B6%94%EA%B0%80\">추가!!</a></p>\n<ul>\n<li><a href=\"/2-nginxStudy/#%EB%A1%9C%EA%B7%B8-%ED%8C%8C%EC%9D%BC-%EC%9C%84%EC%B9%98\">로그 파일 위치</a></li>\n</ul>\n</li>\n<li><a href=\"/2-nginxStudy/#upstream-module\">Upstream Module</a></li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/2-nginxStudy/"},"frontmatter":{"title":"Nginx 학습","date":"Feb 24, 2021","tags":["Nginx"],"keywords":["Nginx"],"update":"Jan 01, 0001"}}},"pageContext":{"slug":"/2-nginxStudy/","series":[],"lastmod":"2021-02-24"}},"staticQueryHashes":["2027115977","694178885"]}